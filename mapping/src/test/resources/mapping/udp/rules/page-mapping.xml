<!--
  ~ Copyright(C) (2024) Zyient Inc. (open.source at zyient dot io)
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<configuration>
    <mapping entity="io.zyient.core.mapping.pipeline.impl.udp.model.PageContext"
             type="io.zyient.core.mapping.pipeline.impl.udp.mappings.PageMapping">
        <settings>
            <name>test-page-node</name>
            <!--
            <currency>[ISO Currency Symbol]</currency>
            <format>
                <date>[Date Format String]</date>
            </format>
            <locale>[{Country Code}, {Language Code}]</locale>
            -->
        </settings>
        <mappings>
            <map source="id">
                <sequence>1</sequence>
                <target>id</target>
                <nullable>false</nullable>
                <type>Field</type>
            </map>
            <map source="category">
                <sequence>2</sequence>
                <target>category</target>
                <nullable>false</nullable>
                <type>Field</type>
            </map>
            <map source="pageNo">
                <sequence>3</sequence>
                <target>pageNo</target>
                <nullable>false</nullable>
                <type>Field</type>
            </map>
        </mappings>
        <rules>
            <rule settings="io.zyient.core.mapping.rules.spel.SpELRuleConfig">
                <name>set-parent</name>
                <expression>
                    (context.get('_udp_document'))
                </expression>
                <field>parent</field>
                <ruleType>Transformation</ruleType>
                <errorCode>1000001</errorCode>
                <validationErrorCode>1500001</validationErrorCode>
            </rule>
        </rules>
    </mapping>
</configuration>