<?xml version="1.0" encoding="ISO-8859-1" ?>
<!--
  ~ Copyright(C) (2024) Zyient Inc. (open.source at zyient dot io)
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<configuration>
    <executor>
        <settings>
            <numThreads>4</numThreads>
            <taskQueueSize>32</taskQueueSize>
        </settings>
        <mappers>
            <factory>
                <contentDir>src/test/resources/mapping/mappers</contentDir>
                <mappings>
                    <test-customer>test/test-invoice-reverse.xml</test-customer>
                </mappings>
            </factory>
        </mappers>
        <contextProvider type="io.zyient.core.mapping.JPathContextProvider">
            <readers>
                <JSON>json-reader</JSON>
            </readers>
            <mappings>
                <customers>test-customer</customers>
            </mappings>
        </contextProvider>
        <pipelines>
            <pipeline type="io.zyient.core.mapping.pipeline.JpathPipeline">
                <name>TEST-CUSTOMERS</name>
                <mapping>test-customer</mapping>
                <responseType>io.zyient.core.mapping.mapper.InvoiceMappedResponse</responseType>
                <terminateOnValidationError>false</terminateOnValidationError>
                <saveValidationErrors>false</saveValidationErrors>
                <dataStore>
                    <name>test-rdbms</name>
                    <type>io.zyient.core.persistence.impl.rdbms.RdbmsDataStore</type>
                </dataStore>
            </pipeline>
        </pipelines>
        <readers>
            <!--
            <factory>
                <defaults>
                    <type>[Reader Class]</type>
                </defaults>
            </factory>
            -->
            <reader type="io.zyient.core.mapping.readers.impl.context.ContextReaderConfig">
                <name>json-reader</name>
                <assumeFileType>JSON</assumeFileType>
                <readBatchSize>1024</readBatchSize>
                <type>DEFAULT</type>
                <contextKey>udp_json</contextKey>
            </reader>
        </readers>
    </executor>
</configuration>